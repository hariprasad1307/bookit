<div class="container">
  <h2>Booking Details</h2>
  <div *ngIf="bus">
    <p><strong>Registration Number:</strong> {{ bus.registrationNumber }}</p>
    <p><strong>Origin:</strong> {{ bus.origin }}</p>
    <p><strong>Destination:</strong> {{ bus.destination }}</p>
    <p><strong>Departure Time:</strong> {{ bus.departureTime }}</p>
    <p><strong>Arrival Time:</strong> {{ bus.arrivalTime }}</p>
    <p><strong>Price:</strong> {{ bus.price }}</p>
  </div>
  <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="phoneNumber">Phone Number:</label>
      <input type="text" id="phoneNumber" formControlName="phoneNumber" class="form-control" (blur)="fetchCustomerDetails()">
    </div>
    <div *ngIf="customer">
      <p><strong>Customer Name:</strong> {{ customer.name }}</p>
      <p><strong>Email:</strong> {{ customer.email }}</p>
      <p><strong>Age:</strong> {{ customer.age }}</p>
      <p><strong>Gender:</strong> {{ customer.gender }}</p>
    </div>
    <div class="form-group">
      <label for="dateOfBooking">Date of Booking:</label>
      <input type="date" id="dateOfBooking" formControlName="dateOfBooking" class="form-control">
    </div>
    <div class="form-group">
      <label for="numberOfSeats">Number of Seats:</label>
      <input type="number" id="numberOfSeats" formControlName="numberOfSeats" class="form-control" (input)="calculateTotalAmount()">
    </div>
    <div>
      <p *ngIf="totalAmount > 0"><strong>Total Amount:</strong> {{ totalAmount }}</p>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="!bookingForm.valid">Book</button>
  </form>
  <google-pay-button
    environment="TEST"
    buttonType="buy"
    buttonColor="black"
    [paymentRequest]="paymentRequest"
    (loadpaymentdata)="onLoadPaymentData($event)">
  </google-pay-button>
</div>
